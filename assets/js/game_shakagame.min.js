var isMobile=/iPhone|iPad|iPod|Android/i.test(navigator.userAgent);function setCookie(name,value,exdays){var date=new Date,exdays=(date.setDate(date.getDate()+exdays),"expires="+date.toUTCString());document.cookie=name+"="+value+"; "+exdays+";path=/"}function getCookie(name){for(var arrCookie=document.cookie.split("; "),i=0;i<arrCookie.length;i++){var arr=arrCookie[i].split("=");if(arr[0]==name)return arr[1]}return""}var isSupportWebp=function(){try{return 0===document.createElement("canvas").toDataURL("image/webp",.5).indexOf("data:image/webp")}catch(err){return!1}},errorCDN=function(e){var src=e.getAttribute("data-error"),scriptDOM=document.createElement("script");scriptDOM.src=src,console.warn(e,"CDN ERROR"),document.head.appendChild(scriptDOM),e.onload&&(scriptDOM.onload=e.onload),e.remove()},jqReadyHanlder=function(){document.body.clientWidth<=767&&$("#share").click(function(){navigator.share({title:"weGame",text:"",url:location.href+"/?utm_source=game&utm_medium=share"}).then(()=>console.log("Share was successful.")).catch(error=>console.log("Sharing failed",error))});let deferredPrompt;const addBtn=$(".home_add"),footerBtn=$("#home");footerBtn.css("display","none"),window.addEventListener("beforeinstallprompt",e=>{e.preventDefault(),deferredPrompt=e,$(window).scroll(function(event){$(window).scrollTop()>$(window).height()&&document.body.clientWidth<=1024&&footerBtn.css("display","flex")}),addBtn.on("click",e=>{deferredPrompt.prompt(),deferredPrompt.userChoice.then(choiceResult=>{"accepted"===choiceResult.outcome?console.log("User accepted the Add to home prompt"):console.log("User dismissed the Add to home prompt")})})}),"serviceWorker"in navigator&&navigator.serviceWorker.register("/sw.js").then(()=>{console.log("Service Worker Registered")}),$(function(){$("head").append($('<link rel="stylesheet">').attr("href","https://fonts.googleapis.com/css2?family=Caveat:wght@700&family=Roboto+Slab:wght@700&family=Roboto:wght@500&display=swap")),(icon_script=document.createElement("script")).src="https://cdn.jsdelivr.net/gh/JimmyBryant/iconfont@latest/iconfont.js",icon_script.setAttribute("data-error","/assets/iconfont/iconfont.js"),icon_script.setAttribute("onerror","errorCDN(this)"),document.body.append(icon_script),document.querySelector("#game_audio>iframe")&&$("#game_audio>iframe").attr("src",$("#game_audio>iframe").data("src"));var icon_script=document.getElementById("useAgree"),userConsent=document.getElementById("userConsent");icon_script&&icon_script.addEventListener("click",function(){setCookie("user-consent","1",365),userConsent.style.opacity=0,userConsent.style.zIndex=-1,$("#home").css("bottom","20px")}),getCookie("user-consent")||userConsent&&(userConsent.style.opacity=1,userConsent.style.zIndex=1e3,$("#home").css("bottom","60px")),$("#mobile-right").click(function(){$("#mobile-menu").css("left","0")}),$(".similargames_title_close").click(function(){$("#mobile-menu").css("left","-100%")}),$(".gameplug_close").click(function(){$("#gameplug").hide()}),$("#menu").click(function(){$(".hd-menu-box").slideToggle()}),$(document).on("click",".pop_li_box>.icon_close",function(){$(this).parent().parent().remove();var deletext=$(this).siblings(".pop_item").children(".pop_name").text(),localmark=(localStorage.removeItem(deletext),localStorage.getItem("localmark")),localmark=(arr=localmark.substring(0,localmark.length-1).split("/"),$(arr).each(function(i,item){arr[i]==deletext&&arr.splice(jQuery.inArray(arr[i],arr),1)}),0!=arr.length?(arr=arr.join("/"),arr+="/",localStorage.setItem("localmark",arr)):(localStorage.removeItem("localmark"),$(".fav_listbox").hide().siblings(".empty").show()),$(".nav_li .fav_num").text());$(".fav_num").text(parseInt(localmark)-1)}),$(document).click(function(event){$(this).children(".dropdown-content").slideUp(),event.stopPropagation()}),$(".dropdown").click(function(event){$(this).children(".dropdown-content").slideToggle(),event.stopPropagation()}),localStorage.localmark&&(icon_script=localStorage.getItem("localmark"),arr=icon_script.substring(0,icon_script.length-1).split("/"),$(arr).each(function(i,item){$(".fav_num").text(arr.length);var localjson1=localStorage.getItem(arr[i]),localjson1=JSON.parse(localjson1),localjson1=(str1='<li class="pop_li"><div class="pop_li_box">',str1=(str1=(str1+='<a href="'+localjson1.href2+'" class="game_img">')+('<img src="'+localjson1.img2+'"></a>'))+('<a href="'+localjson1.href2+'" class="pop_item"><h4 class="pop_name">'+arr[i]+"</h4></a>")+'<svg class="icon_close"><use xlink:href="#icon-close"></use></svg></div></li>',$("#fav_list").append(str1),$(".fav_listbox").show().siblings(".empty").hide(),$(".game_title").text());arr[i]==localjson1&&$("#favorite").addClass("remove_fav").removeClass("click_fav")})),$("#favorite").click(function(){var removeName,txt2,href2,img2,localmark;$(this).hasClass("remove_fav")?(removeName=$(".game_title").text(),localStorage.removeItem(removeName),localmark=localStorage.getItem("localmark"),arr=localmark.substring(0,localmark.length-1).split("/"),$(arr).each(function(i,item){arr[i]==removeName&&arr.splice(jQuery.inArray(arr[i],arr),1)}),0!=arr.length?(arr=arr.join("/"),arr+="/",localStorage.setItem("localmark",arr)):localStorage.removeItem("localmark"),localmark=$(".nav_li .fav_num").text(),$(".fav_num").text(parseInt(localmark)-1)):(txt2=$(".game_title").text(),href2=location.href,img2=$(".img_topfix>img").attr("src")||$(".gamejoy_img").attr("src"),href2=JSON.stringify({href2:href2,txt2:txt2,img2:img2}),localStorage.setItem(txt2,href2),img2="",localStorage.localmark?(img2=localStorage.getItem("localmark"),img2+=txt2+"/"):img2=txt2+"/",localStorage.setItem("localmark",img2),localmark=$(".nav_li .fav_num").text(),$(".fav_num").text(parseInt(localmark)+1)),$(this).toggleClass("remove_fav").toggleClass("click_fav")}),$(".pop_li_box>.game_img[data-preview]").hover(function(e){var video=function(src,onload){var video=document.createElement("video");return video.className="preview",video.loop="loop",video.autoplay="autoplay",video.muted="muted",video.src=src,onload&&video.addEventListener("load",onload),video}($(this).data("preview"));this.append(video)},function(e){$(this).find("video.preview").remove()})})};function onPageLoaded(callback){"complete"==document.readyState?callback&&callback():window.addEventListener("load",function(){callback&&callback()})}onPageLoaded(function(){var jq_s=document.createElement("script");jq_s.src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js",jq_s.setAttribute("onerror","errorCDN(this)"),jq_s.setAttribute("data-error","/assets/js/jquery-3.6.0.min.js"),jq_s.onload=function(){jqReadyHanlder()},document.body.appendChild(jq_s)});var lazyLoadInstance=new LazyLoad({elements_selector:".lazyload"});